{
  "name": "Error Scenarios", 
  "description": "Various error conditions and failure modes",
  "scenarios": [
    {
      "name": "composer-update-failure",
      "description": "Composer update task fails with dependency conflicts",
      "state": {
        "selfUpdate": {
          "current_version": "1.9.5",
          "latest_version": "1.9.5",
          "channel": "stable", 
          "supported": true
        },
        "scenarios": {
          "taskFailures": {
            "composer/update": "Loading composer repositories with package information\nUpdating dependencies\nYour requirements could not be resolved to an installable set of packages.\n\nProblem 1\n- contao/core-bundle 5.3.37 requires php ^8.2 but your php version (8.1.15) does not satisfy that requirement.\n- Root composer.json requires contao/core-bundle ^5.3 -> satisfiable by contao/core-bundle[5.3.37].\n\nProblem 2\n- oveleon/contao-cookiebar 2.1.5 conflicts with symfony/clock ^6.4.8\n\nUse the option --with-all-dependencies (-W) to allow upgrades, downgrades and removals for packages currently locked to specific versions."
          },
          "networkLatency": 100
        }
      }
    },
    {
      "name": "migration-failure", 
      "description": "Database migration fails due to constraint violation",
      "state": {
        "selfUpdate": {
          "current_version": "1.9.5",
          "latest_version": "1.9.5",
          "channel": "stable",
          "supported": true
        },
        "pendingMigrations": [
          {
            "name": "ALTER TABLE tl_member ADD CONSTRAINT unique_email UNIQUE (email)",
            "status": "error",
            "message": "SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'user@example.com' for key 'unique_email'"
          },
          {
            "name": "CREATE TABLE tl_advanced_features (id int(10) unsigned NOT NULL auto_increment, PRIMARY KEY (id))",
            "status": "pending",
            "message": "Creating advanced features table"
          }
        ],
        "scenarios": {
          "migrationFailures": true,
          "networkLatency": 75
        }
      }
    },
    {
      "name": "manager-update-failure",
      "description": "Manager self-update fails due to permission issues",
      "state": {
        "selfUpdate": {
          "current_version": "1.9.4", 
          "latest_version": "1.9.5",
          "channel": "stable",
          "supported": true
        },
        "scenarios": {
          "taskFailures": {
            "manager/self-update": "Permission denied: Cannot write to /usr/local/bin/contao-manager.phar.php"
          },
          "networkLatency": 60
        }
      }
    },
    {
      "name": "authentication-error",
      "description": "API authentication fails",
      "state": {
        "selfUpdate": {
          "current_version": "1.9.5",
          "latest_version": "1.9.5", 
          "channel": "stable",
          "supported": true
        },
        "scenarios": {
          "authErrors": true,
          "networkLatency": 40
        }
      }
    },
    {
      "name": "pending-tasks-blocking",
      "description": "Existing tasks prevent workflow from starting",
      "state": {
        "currentTask": {
          "id": "existing-task-123",
          "title": "Manual Package Installation",
          "status": "active",
          "console": "Installing packages manually...\nDownloading symfony/console...",
          "cancellable": true,
          "autoclose": false,
          "audit": false,
          "operations": [
            {
              "summary": "Installing symfony/console", 
              "details": "Downloading from packagist",
              "console": "Downloading...",
              "status": "active"
            }
          ]
        },
        "selfUpdate": {
          "current_version": "1.9.5",
          "latest_version": "1.9.5",
          "channel": "stable", 
          "supported": true
        }
      }
    },
    {
      "name": "pending-migration-task-blocking",
      "description": "Existing migration task blocks workflow",
      "state": {
        "currentMigration": {
          "type": "migrations",
          "status": "active", 
          "hash": "abc123def",
          "operations": [
            {
              "name": "Running manual migration",
              "status": "active",
              "message": "Executing custom migration script"
            }
          ]
        },
        "selfUpdate": {
          "current_version": "1.9.5",
          "latest_version": "1.9.5",
          "channel": "stable",
          "supported": true
        }
      }
    },
    {
      "name": "high-latency-network",
      "description": "Very slow network conditions",
      "state": {
        "selfUpdate": {
          "current_version": "1.9.5", 
          "latest_version": "1.9.5",
          "channel": "stable",
          "supported": true
        },
        "scenarios": {
          "networkLatency": 2000
        }
      }
    }
  ]
}